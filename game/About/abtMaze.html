<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../maze.css">
    <title>How We Built the Maze</title>
</head>
<body>
  <h1><mark id="header">About the Maze</mark></h1>
  <h2>How we got the idea</h2>
    <p>At first, Hudson convinced the group to try to make a Spotify clone with more features. It worked, but he had a "better" idea the next day.
    He wanted to make a maze that goes room by room and has a max possible doorway count of 4. The pod was on board quickly.</p>
  <h2>How we Built the maze</h2>
  <p>
    The user navigates through the maze where each room is a separate HTML
    page generated and loaded by JavaScript. The game listens for entering
    an area defined as an ‘exit,’ upon entering this area, a button will
    appear that can take them to a new room. Therein lies the maze. The goal
    is to find 5 objective items to unlock the exit and escape. Along the
    way, the player will encounter deadly enemies that can only be escaped
    from, not killed. The user uses the arrow keys or WASD to move the
    character through the maze. The maze is room-by-room with anywhere from
    1 to 4 entry points and entry points being able to load the player
    character into another room.
  </p> 
  <p class="center">
    <img src="programFlow.svg" alt="A flow diagram of the code's classes and functions." id="flow">
  </p>
  <p>
    The program can be split into two mostly distinct parts: the player
    and the level manager. The level manager is responsible for saving,
    loading, and setting the global position, as well as keeping track of
    what room the current position corresponds to. The global position is
    tracked using cookies, while the maze is generated from a maze string
    written in symbols we made for this project. The specific room is
    generated using this symbol and is stored by the level manager. A room
    is in turn defined as many rectangles, which can be drawn and collided
    with. The player is responsible for its position within a room, as
    well as figuring out when to request a room transition. It manages
    input using a custom input class, which stores the keys pressed as a
    4-bit number. The player also stores a reference to the level manager
    so it can request a transition.
  </p>

  <h2>How we built the sprites</h2>
    <p>
      Hudson selected the initial test sprite and designed the final
      player sprite. He was also responsible for writing code that drew
      the rooms onto the screen using lines. Later he converted that code
      to use rectangles, as shown in the final game.
    </p>
  <h2>Errors encounters and how we fixed them</h2>

  <ul>
    <li>
      In earlier versions of the game, rooms were drawn with lines. A
      missing "ctx.beginPath()" call resulted in old lines being draw
      after a room transition, dragging down frame rates and resulting in
      old rooms being drawn on top of new rooms.
    </li>
    <li>
      After collision was implemented, the player could clip through the
      bottom or top walls if there was a hallway by aligning themselves
      exactly with the edge of the wall. This was fixed by switching the
      inequalities from "&gt;" and "&lt;" to "&gt;=" and "&lt;=".
    </li>
    <li>
      The level manager did not properly check if the player was attempting to
      move outside of the maze. This resulted in the player walking off screen
      and the level manager saving the now-invalid permission, then
      immediately crashing and permanently softlocking the game.
    </li>
  </ul>
<h2>How we could expand it</h2>
  <ul>
    <li>We thought of having a key system where 5 keys spread out across the maze must be collected before the escape opens.</li>
    <li>A monster that randomly spawns upon entering a new room. It will shamble towards the player and if it gets too close, the game ends. It can follow the player through a few hallways.</li>
    <li>A level editor to make your own maze.</li>
    <li>A difficulty button to change the size of maze you are put in.</li>
  </ul>
  <footer id="nav">
    <a href="../index.html">Index Page</a>
    <a href="">About the Maze</a>
  </footer>
</body>
</html>
